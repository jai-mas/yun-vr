{"version":3,"sources":["uni-app:///main.js","webpack:///D:/yunyou/yun-vr/pages/leavemessage/message.vue?ed76","webpack:///D:/yunyou/yun-vr/pages/leavemessage/message.vue?4f97","webpack:///D:/yunyou/yun-vr/pages/leavemessage/message.vue?7a59","webpack:///D:/yunyou/yun-vr/pages/leavemessage/message.vue?f059","uni-app:///pages/leavemessage/message.vue","webpack:///D:/yunyou/yun-vr/pages/leavemessage/message.vue?c15a","webpack:///D:/yunyou/yun-vr/pages/leavemessage/message.vue?51d4"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","components","TabBar","data","statusBarHeight","listHeight","newMessage","messageList","bannerList","messagePositions","left","top","transform","onLoad","console","methods","getSystemInfo","calculateListHeight","sendMessage","uni","title","icon","year","month","day","hour","minute","id","content","time","loadBannerData","url","method","header","response","imageUrl","description","duration","loadMessageData","filteredMessages","limitedMessages","onSwiperChange","onBannerClick","getNoteBgImage","onTabChange"],"mappings":"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","file":"pages/leavemessage/message.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/leavemessage/message.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./message.vue?vue&type=template&id=0ab88261&\"\nvar renderjs\nimport script from \"./message.vue?vue&type=script&lang=js&\"\nexport * from \"./message.vue?vue&type=script&lang=js&\"\nimport style0 from \"./message.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../Wechatxcx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/leavemessage/message.vue\"\nexport default component.exports","export * from \"-!../../../../Wechatxcx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../Wechatxcx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../Wechatxcx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../Wechatxcx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../Wechatxcx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../Wechatxcx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./message.vue?vue&type=template&id=0ab88261&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.messagePositions.length\n  var g1 = _vm.messagePositions.length\n  var g2 = _vm.messagePositions.length\n  var l0 = _vm.__map(_vm.messageList, function (message, index) {\n    var $orig = _vm.__get_orig(message)\n    var m0 = _vm.getNoteBgImage(index)\n    return {\n      $orig: $orig,\n      m0: m0,\n    }\n  })\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        g1: g1,\n        g2: g2,\n        l0: l0,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../Wechatxcx/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../Wechatxcx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../Wechatxcx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../Wechatxcx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../Wechatxcx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./message.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../Wechatxcx/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../Wechatxcx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../Wechatxcx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../Wechatxcx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../Wechatxcx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./message.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"message-container\">\r\n\t\t<!-- 背景图铺满整个界面 -->\r\n\t\t<image class=\"full-bg\" src=\"/static/leavemessage/背景.png\" mode=\"aspectFill\"></image>\r\n\t\t\r\n\t\t<!-- 标题图片 -->\r\n\t\t<view class=\"title-section\" :style=\"{ paddingTop: statusBarHeight + 20 + 'px' }\">\r\n\t\t\t<image class=\"title-image\" src=\"/static/leavemessage/image.png\" mode=\"aspectFit\"></image>\r\n\t\t</view>\r\n\r\n\t\t<!-- 轮播图区域 -->\r\n\t\t<view class=\"swiper-section\">\r\n\t\t\t<swiper \r\n\t\t\t\tclass=\"banner-swiper\" \r\n\t\t\t\t:indicator-dots=\"true\" \r\n\t\t\t\t:autoplay=\"true\" \r\n\t\t\t\t:interval=\"4000\" \r\n\t\t\t\t:duration=\"800\"\r\n\t\t\t\t:circular=\"true\"\r\n\t\t\t\tindicator-color=\"rgba(255, 255, 255, 0.5)\"\r\n\t\t\t\tindicator-active-color=\"#ffffff\"\r\n\t\t\t\t@change=\"onSwiperChange\"\r\n\t\t\t>\r\n\t\t\t\t<swiper-item v-for=\"(item, index) in bannerList\" :key=\"index\" @click=\"onBannerClick(item, index)\">\r\n\t\t\t\t\t<view class=\"swiper-item\">\r\n\t\t\t\t\t\t<image class=\"banner-image\" :src=\"item.imageUrl\" mode=\"aspectFill\"></image>\r\n\t\t\t\t\t\t<view class=\"banner-overlay\">\r\n\t\t\t\t\t\t\t<text class=\"banner-title\">{{ item.title }}</text>\r\n\t\t\t\t\t\t\t<text class=\"banner-desc\">{{ item.description }}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</swiper-item>\r\n\t\t\t</swiper>\r\n\t\t</view>\r\n\r\n\t\t<!-- 主要内容区域 -->\r\n\t\t<view class=\"main-content\">\r\n\t\t\t\t\t<!-- 留言列表 -->\r\n\t\t<view class=\"message-list-container\" :style=\"{ height: listHeight + 'px' }\">\r\n\t\t\t<view v-for=\"(message, index) in messageList\" :key=\"index\" class=\"message-item\" \r\n\t\t\t\t:style=\"{\r\n\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\tleft: messagePositions[index % messagePositions.length].left,\r\n\t\t\t\t\ttop: messagePositions[index % messagePositions.length].top,\r\n\t\t\t\t\ttransform: messagePositions[index % messagePositions.length].transform,\r\n\t\t\t\t\twidth: '200rpx',\r\n\t\t\t\t\theight: '200rpx',\r\n\t\t\t\t\tzIndex: 3\r\n\t\t\t\t}\">\r\n\t\t\t\t<!-- 便签背景 -->\r\n\t\t\t\t<image class=\"note-bg\" :src=\"getNoteBgImage(index)\" mode=\"aspectFit\"></image>\r\n\t\t\t\t\r\n\t\t\t\t<!-- 留言内容 -->\r\n\t\t\t\t<view class=\"note-content\">\r\n\t\t\t\t\t<text class=\"note-text\">{{ message.content }}</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t</view>\r\n\t\t\r\n\t\t<!-- 发送留言区域 - 固定在底部 -->\r\n\t\t<view class=\"send-area-fixed\">\r\n\t\t\t<view class=\"input-container\">\r\n\t\t\t\t<!-- 输入框 -->\r\n\t\t\t\t<view class=\"input-wrapper\">\r\n\t\t\t\t\t<input \r\n\t\t\t\t\t\tclass=\"message-input\" \r\n\t\t\t\t\t\ttype=\"text\" \r\n\t\t\t\t\t\tplaceholder=\"写下你的留言...\" \r\n\t\t\t\t\t\tv-model=\"newMessage\"\r\n\t\t\t\t\t\tmaxlength=\"200\"\r\n\t\t\t\t\t\t@confirm=\"sendMessage\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</view>\r\n\t\t\t\t\r\n\t\t\t\t<!-- 发送按钮 -->\r\n\t\t\t\t<view class=\"send-btn\" @click=\"sendMessage\">\r\n\t\t\t\t\t<text class=\"send-btn-text\">发送</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t\r\n\t\t<!-- 底部导航栏 -->\r\n\t\t<TabBar current=\"message\" @change=\"onTabChange\" />\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport TabBar from '@/compents/TabBar.vue'\r\n\t\r\n\texport default {\r\n\t\tcomponents: {\r\n\t\t\tTabBar\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tstatusBarHeight: 44, // 状态栏高度\r\n\t\t\t\tlistHeight: 0, // 列表高度\r\n\t\t\t\tnewMessage: '', // 新留言内容\r\n\t\t\t\tmessageList: [], // 留言数据，改为空数组\r\n\t\t\t\tbannerList: [], // 轮播图数据\r\n\t\t\t\tmessagePositions: [\r\n\t\t\t\t\t// 第一排\r\n\t\t\t\t\t{ left: '40rpx', top: '30rpx', transform: 'rotate(-5deg)' },\r\n\t\t\t\t\t{ left: '290rpx', top: '50rpx', transform: 'rotate(3deg)' },\r\n\t\t\t\t\t{ left: '540rpx', top: '20rpx', transform: 'rotate(-8deg)' },\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 第二排\r\n\t\t\t\t\t{ left: '20rpx', top: '280rpx', transform: 'rotate(6deg)' },\r\n\t\t\t\t\t{ left: '310rpx', top: '260rpx', transform: 'rotate(-4deg)' },\r\n\t\t\t\t\t{ left: '560rpx', top: '290rpx', transform: 'rotate(7deg)' },\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 第三排\r\n\t\t\t\t\t{ left: '60rpx', top: '530rpx', transform: 'rotate(-6deg)' },\r\n\t\t\t\t\t{ left: '270rpx', top: '550rpx', transform: 'rotate(4deg)' },\r\n\t\t\t\t\t{ left: '520rpx', top: '520rpx', transform: 'rotate(-3deg)' }\r\n\t\t\t\t]\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad() {\r\n\t\t\tthis.getSystemInfo();\r\n\t\t\tthis.calculateListHeight();\r\n\t\t\tthis.loadBannerData();\r\n\t\t\tthis.loadMessageData();\r\n\t\t\tconsole.log('留言数据:', this.messageList);\r\n\t\t\tconsole.log('留言数量:', this.messageList.length);\r\n\t\t\tconsole.log('位置数据:', this.messagePositions);\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t// 获取系统信息\r\n\t\t\tgetSystemInfo() {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst systemInfo = uni.getSystemInfoSync();\r\n\t\t\t\t\tthis.statusBarHeight = systemInfo.statusBarHeight || 44;\r\n\t\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\t\tthis.calculateListHeight();\r\n\t\t\t\t\t});\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tconsole.log('获取系统信息失败', e);\r\n\t\t\t\t\tthis.statusBarHeight = 44;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 计算列表高度\r\n\t\t\tcalculateListHeight() {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst systemInfo = uni.getSystemInfoSync();\r\n\t\t\t\t\tconst windowHeight = systemInfo.windowHeight;\r\n\t\t\t\t\t// 简化高度计算，给留言区域足够的空间\r\n\t\t\t\t\tthis.listHeight = Math.max(windowHeight * 0.4, 400); // 至少400px高度\r\n\t\t\t\t\tconsole.log('计算的列表高度:', this.listHeight);\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tconsole.log('计算高度失败', e);\r\n\t\t\t\t\tthis.listHeight = 400;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 发送留言\r\n\t\t\tsendMessage() {\r\n\t\t\t\tif (!this.newMessage || !this.newMessage.trim()) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '请输入留言内容',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// 检查留言长度\r\n\t\t\t\tif (this.newMessage.trim().length > 30) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '留言内容不能超过30个字符',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// 获取当前时间\r\n\t\t\t\tconst now = new Date();\r\n\t\t\t\tconst time = now.toLocaleString('zh-CN', {\r\n\t\t\t\t\tyear: 'numeric',\r\n\t\t\t\t\tmonth: '2-digit',\r\n\t\t\t\t\tday: '2-digit',\r\n\t\t\t\t\thour: '2-digit',\r\n\t\t\t\t\tminute: '2-digit'\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\t// 添加新留言到列表顶部\r\n\t\t\t\tconst newMsg = {\r\n\t\t\t\t\tid: Date.now(), // 使用时间戳作为临时ID\r\n\t\t\t\t\tcontent: this.newMessage.trim(),\r\n\t\t\t\t\ttime: time\r\n\t\t\t\t};\r\n\t\t\t\t\r\n\t\t\t\t// 如果已有9条留言，移除最后一条\r\n\t\t\t\tif (this.messageList.length >= 9) {\r\n\t\t\t\t\tthis.messageList.pop();\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthis.messageList.unshift(newMsg);\r\n\t\t\t\tthis.newMessage = '';\r\n\t\t\t\t\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '留言发送成功',\r\n\t\t\t\t\ticon: 'success'\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 加载轮播图数据\r\n\t\t\tasync loadBannerData() {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\ttitle: '加载中...'\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\t\tconst response = await uni.request({\r\n\t\t\t\t\t\turl: 'http://team2.lizxx.com/api/wall/carousel',\r\n\t\t\t\t\t\tmethod: 'GET',\r\n\t\t\t\t\t\theader: {\r\n\t\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (response.data && response.data.code === 200 && response.data.data) {\r\n\t\t\t\t\t\t// 将接口返回的图片URL转换为轮播图数据格式\r\n\t\t\t\t\t\tthis.bannerList = response.data.data.map((imageUrl, index) => ({\r\n\t\t\t\t\t\t\timageUrl: imageUrl,\r\n\t\t\t\t\t\t\ttitle: `精彩瞬间 ${index + 1}`,\r\n\t\t\t\t\t\t\tdescription: '分享美好时光，留下珍贵回忆'\r\n\t\t\t\t\t\t}));\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tconsole.log('轮播图数据加载成功:', this.bannerList);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthrow new Error('数据格式错误');\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\tconsole.error('获取轮播图数据失败:', error);\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 使用默认数据作为备用\r\n\t\t\t\t\tthis.bannerList = [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\timageUrl: '/static/map/blueSky.png',\r\n\t\t\t\t\t\t\ttitle: '美丽风景1',\r\n\t\t\t\t\t\t\tdescription: '这里有最美丽的风景，欢迎大家来游览'\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\timageUrl: '/static/map/blueSky.png',\r\n\t\t\t\t\t\t\ttitle: '美丽风景2',\r\n\t\t\t\t\t\t\tdescription: '体验不一样的自然风光，感受大自然的魅力'\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\timageUrl: '/static/map/blueSky.png',\r\n\t\t\t\t\t\t\ttitle: '美丽风景3',\r\n\t\t\t\t\t\t\tdescription: '留下美好的回忆，分享快乐的时光'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t];\r\n\t\t\t\t\t\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '轮播图加载失败，使用默认数据',\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 加载留言数据\r\n\t\t\tasync loadMessageData() {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst response = await uni.request({\r\n\t\t\t\t\t\turl: 'http://team2.lizxx.com/api/wall/message/list',\r\n\t\t\t\t\t\tmethod: 'GET',\r\n\t\t\t\t\t\theader: {\r\n\t\t\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (response.data && response.data.code === 200 && response.data.data) {\r\n\t\t\t\t\t\t// 过滤过长的消息，只保留长度适中的消息\r\n\t\t\t\t\t\tconst filteredMessages = response.data.data.filter(item => {\r\n\t\t\t\t\t\t\treturn item.msg && item.msg.length <= 30; // 过滤长度超过30字符的消息\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// 只取前9条消息（对应9个位置）\r\n\t\t\t\t\t\tconst limitedMessages = filteredMessages.slice(0, 9);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// 转换为组件需要的数据格式\r\n\t\t\t\t\t\tthis.messageList = limitedMessages.map(item => ({\r\n\t\t\t\t\t\t\tid: item.id,\r\n\t\t\t\t\t\t\tcontent: item.msg,\r\n\t\t\t\t\t\t\ttime: new Date().toLocaleString('zh-CN', {\r\n\t\t\t\t\t\t\t\tyear: 'numeric',\r\n\t\t\t\t\t\t\t\tmonth: '2-digit',\r\n\t\t\t\t\t\t\t\tday: '2-digit',\r\n\t\t\t\t\t\t\t\thour: '2-digit',\r\n\t\t\t\t\t\t\t\tminute: '2-digit'\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}));\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tconsole.log('留言数据加载成功:', this.messageList);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthrow new Error('留言数据格式错误');\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.error('获取留言数据失败:', error);\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 使用默认留言数据作为备用\r\n\t\t\t\t\tthis.messageList = [\r\n\t\t\t\t\t\t{ content: '这里的风景真美！', time: '2024-01-15 10:30' },\r\n\t\t\t\t\t\t{ content: '很喜欢这个地方', time: '2024-01-15 09:45' },\r\n\t\t\t\t\t\t{ content: '和家人一起度过了美好时光', time: '2024-01-14 16:20' }\r\n\t\t\t\t\t];\r\n\t\t\t\t\t\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '留言加载失败，使用默认数据',\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 轮播图切换事件\r\n\t\t\tonSwiperChange(event) {\r\n\t\t\t\tconsole.log('轮播图切换到第', event.detail.current, '张');\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 轮播图点击事件\r\n\t\t\tonBannerClick(item, index) {\r\n\t\t\t\tconsole.log('点击了轮播图', index, item);\r\n\t\t\t\t// TODO: 根据轮播图数据进行页面跳转或其他操作\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 获取便签背景图片\r\n\t\t\tgetNoteBgImage(index) {\r\n\t\t\t\tconst bgImages = [\r\n\t\t\t\t\t'/static/leavemessage/image 49649.png',\r\n\t\t\t\t\t'/static/leavemessage/image 49651.png',\r\n\t\t\t\t\t'/static/leavemessage/image 49652.png',\r\n\t\t\t\t\t'/static/leavemessage/image 49653.png',\r\n\t\t\t\t\t'/static/leavemessage/image 49654.png'\r\n\t\t\t\t];\r\n\t\t\t\treturn bgImages[index % bgImages.length];\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 处理 TabBar 切换事件\r\n\t\t\tonTabChange(tabName) {\r\n\t\t\t\tconsole.log('Tab changed to:', tabName);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\tpage {\r\n\t\twidth: 100vw;\r\n\t\theight: 100vh;\r\n\t\tmargin: 0;\r\n\t\tpadding: 0;\r\n\t\tbackground-color: #f5f5f5;\r\n\t}\r\n\t\r\n\t.message-container {\r\n\t\tposition: relative;\r\n\t\twidth: 100vw;\r\n\t\theight: 100vh;\r\n\t\toverflow: hidden;\r\n\t\tbackground-color: #f5f5f5;\r\n\t}\r\n\t\r\n\t/* 全屏背景 */\r\n\t.full-bg {\r\n\t\tposition: fixed;\r\n\t\twidth: 100vw;\r\n\t\theight: 100vh;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\tz-index: 1;\r\n\t}\r\n\t\r\n\t/* 标题区域 */\r\n\t.title-section {\r\n\t\tposition: relative;\r\n\t\tz-index: 2;\r\n\t\ttext-align: center;\r\n\t\tpadding-bottom: 30rpx;\r\n\t\tmargin-top: -130rpx;\r\n\t}\r\n\t\r\n\t.title-image {\r\n\t\theight: 220rpx;\r\n\t\tmax-width: 600rpx;\r\n\t}\r\n\t\r\n\t/* 轮播图区域 */\r\n\t.swiper-section {\r\n\t\tposition: relative;\r\n\t\tz-index: 2;\r\n\t\tmargin: 0 30rpx;\r\n\t\tmargin-bottom: 10rpx; /* 减少下边距，让留言内容上移 */\r\n\t\tmargin-top: -60rpx;\r\n\t}\r\n\t\r\n\t.banner-swiper {\r\n\t\theight: 400rpx;\r\n\t\tborder-radius: 20rpx;\r\n\t\toverflow: hidden;\r\n\t}\r\n\t\r\n\t.swiper-item {\r\n\t\tposition: relative;\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t}\r\n\t\r\n\t.banner-image {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tborder-radius: 20rpx;\r\n\t}\r\n\t\r\n\t.banner-overlay {\r\n\t\tposition: absolute;\r\n\t\tbottom: 0;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\tbackground: linear-gradient(transparent, rgba(0, 0, 0, 0.6));\r\n\t\tpadding: 40rpx 30rpx 30rpx 30rpx;\r\n\t\tborder-radius: 0 0 20rpx 20rpx;\r\n\t}\r\n\t\r\n\t.banner-title {\r\n\t\tdisplay: block;\r\n\t\tfont-size: 32rpx;\r\n\t\tfont-weight: bold;\r\n\t\tcolor: #ffffff;\r\n\t\tmargin-bottom: 10rpx;\r\n\t\ttext-shadow: 1rpx 1rpx 2rpx rgba(0, 0, 0, 0.5);\r\n\t}\r\n\t\r\n\t.banner-desc {\r\n\t\tdisplay: block;\r\n\t\tfont-size: 26rpx;\r\n\t\tcolor: #ffffff;\r\n\t\topacity: 0.9;\r\n\t\tline-height: 1.4;\r\n\t\ttext-shadow: 1rpx 1rpx 2rpx rgba(0, 0, 0, 0.5);\r\n\t}\r\n\t\r\n\t/* 主要内容区域 */\r\n\t.main-content {\r\n\t\tposition: relative;\r\n\t\tflex: 1;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tz-index: 2;\r\n\t}\r\n\t\r\n\t/* 留言列表 */\r\n\t.message-list-container {\r\n\t\tposition: relative;\r\n\t\tz-index: 2;\r\n\t\tpadding: 30rpx;\r\n\t\tbox-sizing: border-box;\r\n\t\toverflow: visible;\r\n\t\tmin-height: 1200rpx;\r\n\t}\r\n\t\r\n\t.message-item {\r\n\t\tposition: absolute;\r\n\t\twidth: 200rpx;\r\n\t\theight: 200rpx;\r\n\t\tz-index: 3;\r\n\t}\r\n\t\r\n\t.note-bg {\r\n\t\tposition: absolute;\r\n\t\twidth: 130%;\r\n\t\theight: 130%;\r\n\t\ttop: -10%;\r\n\t\tleft: -10%;\r\n\t\tz-index: 1;\r\n\t}\r\n\t\r\n\t.note-content {\r\n\t\tposition: relative;\r\n\t\tz-index: 2;\r\n\t\tpadding: 40rpx 30rpx;\r\n\t\theight: 100%;\r\n\t\tbox-sizing: border-box;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\ttext-align: center;\r\n\t}\r\n\t\r\n\t.note-text {\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #333;\r\n\t\tline-height: 1.4;\r\n\t\tword-break: break-all;\r\n\t\toverflow: hidden;\r\n\t\tdisplay: -webkit-box;\r\n\t\t-webkit-line-clamp: 4;\r\n\t\t-webkit-box-orient: vertical;\r\n\t\tfont-weight: 500;\r\n\t}\r\n\t\r\n\r\n\t\r\n\t/* 发送留言区域 - 固定在底部 */\r\n\t.send-area-fixed {\r\n\t\tposition: fixed;\r\n\t\tbottom: 160rpx; /* 留言发送区域向上移动 */\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\tz-index: 10;\r\n\t\tbackground: transparent;\r\n\t\tpadding: 30rpx;\r\n\t}\r\n\t\r\n\t.input-container {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tgap: 20rpx;\r\n\t}\r\n\t\r\n\t.input-wrapper {\r\n\t\tflex: 1;\r\n\t\tbackground: rgba(255, 255, 255, 0.9);\r\n\t\tborder-radius: 50rpx;\r\n\t\tpadding: 0 30rpx;\r\n\t\tbackdrop-filter: blur(10rpx);\r\n\t}\r\n\t\r\n\t.message-input {\r\n\t\twidth: 100%;\r\n\t\theight: 80rpx;\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #333;\r\n\t\tbackground: transparent;\r\n\t\tborder: none;\r\n\t}\r\n\t\r\n\t.send-btn {\r\n\t\tbackground: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n\t\tborder-radius: 50rpx;\r\n\t\tpadding: 0 40rpx;\r\n\t\theight: 80rpx;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t}\r\n\t\r\n\t.send-btn-text {\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #ffffff;\r\n\t\tfont-weight: bold;\r\n\t}\r\n</style> ","import mod from \"-!../../../../Wechatxcx/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../Wechatxcx/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../Wechatxcx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../Wechatxcx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../Wechatxcx/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../Wechatxcx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../Wechatxcx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./message.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../Wechatxcx/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../Wechatxcx/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../Wechatxcx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../Wechatxcx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../Wechatxcx/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../Wechatxcx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../Wechatxcx/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./message.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1751345556500\n      var cssReload = require(\"D:/Wechatxcx/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}